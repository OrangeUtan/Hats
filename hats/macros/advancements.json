{%- macro display_options(parent, id, frame, cmd) -%}
	"parent" : "{{ parent }}",
	"display" : {
		"title" : {
			"translate": "advancements.hats.{{ id }}.title"
		},
		"description" : {
			"translate": "advancements.hats.{{ id }}.description"
		},
		"icon": {
			"item": "minecraft:stick",
			"nbt": "{CustomModelData: {{ cmd }}}"
		},
		"frame": "{{ frame }}",
		"show_toast": true,
		"announce_to_chat": false,
		"hidden": false
	}
{%- endmacro %}

{%- macro criteria_received_hats(hats) -%}
	"criteria" : {
		{%- for hat in hats %}
		"{{ hat.type }}": {
			"trigger" : "minecraft:inventory_changed",
			"conditions" : {
				"items": [
					{ "nbt": "{Tags:[\"{{ hat.type_tag }}\"]}" }
				]
			}
		}{% if not loop.last %},{% endif %}
		{%- endfor %}
	}
{%- endmacro %}

{%- macro require_any_hat(hats) -%}
	"requirements" : [[
		{%- for hat in hats %}
		"{{ hat.type }}"{% if not loop.last %},{% endif %}
		{%- endfor %}
	]]
{%- endmacro %}

{%- macro category_root(id, frame, cmd, hats) -%}
{
	{{ display_options("oran9eutan:hats/root", id, frame, cmd) }},
	{{ criteria_received_hats(hats) }},
	{{ require_any_hat(hats) }}
}
{%- endmacro %}
